source: parser_test.go
expression: parsed
---
name: full.http
statements:
  - value:
      value: https://example.com
      token:
        kind: URL
        start: 8
        end: 27
      type: URL
    ident:
      name: base
      token:
        kind: Ident
        start: 1
        end: 5
      type: Ident
    at:
      kind: At
      start: 0
      end: 1
    type: VarStatement
  - value:
      value: 1m
      token:
        kind: Text
        start: 39
        end: 41
      type: TextLiteral
    ident:
      name: timeout
      token:
        kind: Timeout
        start: 29
        end: 36
      type: Ident
    at:
      kind: At
      start: 28
      end: 29
    type: VarStatement
  - url:
      value: https://api.somewhere.com/items/1
      token:
        kind: URL
        start: 142
        end: 175
      type: URL
    body:
      value: |-
        {
          "here": [
            "arbitrary",
            "json"
          ],
          "is_allowed": {
            "including": {
              "nested": [
                "lists"
              ]
            }
          },
          "some": "stuff"
        }
      token:
        kind: Body
        start: 296
        end: 454
      type: Body
    responseRedirect: null
    responseReference: null
    httpVersion:
      version: "2"
      token:
        kind: HTTPVersion
        start: 176
        end: 182
      type: HTTPVersion
    comment: null
    vars:
      - value:
          value: Everything
          token:
            kind: Text
            start: 56
            end: 66
          type: TextLiteral
        ident:
          name: name
          token:
            kind: Name
            start: 51
            end: 55
          type: Ident
        at:
          kind: At
          start: 50
          end: 51
        type: VarStatement
      - value:
          value: 30s
          token:
            kind: Text
            start: 78
            end: 81
          type: TextLiteral
        ident:
          name: timeout
          token:
            kind: Timeout
            start: 70
            end: 77
          type: Ident
        at:
          kind: At
          start: 69
          end: 70
        type: VarStatement
      - value:
          value: 10s
          token:
            kind: Text
            start: 104
            end: 107
          type: TextLiteral
        ident:
          name: connection-timeout
          token:
            kind: ConnectionTimeout
            start: 85
            end: 103
          type: Ident
        at:
          kind: At
          start: 84
          end: 85
        type: VarStatement
      - value: null
        ident:
          name: no-redirect
          token:
            kind: NoRedirect
            start: 112
            end: 123
          type: Ident
        at:
          kind: At
          start: 111
          end: 112
        type: VarStatement
      - value:
          value: shhh
          token:
            kind: Text
            start: 133
            end: 137
          type: TextLiteral
        ident:
          name: token
          token:
            kind: Ident
            start: 127
            end: 132
          type: Ident
        at:
          kind: At
          start: 126
          end: 127
        type: VarStatement
    prompts: []
    headers:
      - value:
          value: application/json
          token:
            kind: Text
            start: 197
            end: 213
          type: TextLiteral
        key: Content-Type
        token:
          kind: Header
          start: 183
          end: 195
        type: Header
      - value:
          value: application/json
          token:
            kind: Text
            start: 222
            end: 238
          type: TextLiteral
        key: Accept
        token:
          kind: Header
          start: 214
          end: 220
        type: Header
      - value:
          value: "yes"
          token:
            kind: Text
            start: 257
            end: 260
          type: TextLiteral
        key: X-Something-Else
        token:
          kind: Header
          start: 239
          end: 255
        type: Header
      - value:
          left:
            value: 'Bearer '
            token:
              kind: Text
              start: 276
              end: 283
            type: TextLiteral
          right: null
          interp:
            expr:
              name: token
              token:
                kind: Ident
                start: 286
                end: 291
              type: Ident
            open:
              kind: OpenInterp
              start: 283
              end: 285
            close:
              kind: CloseInterp
              start: 292
              end: 294
            type: Interp
          type: InterpolatedExpression
        key: Authorization
        token:
          kind: Header
          start: 261
          end: 274
        type: Header
    method:
      token:
        kind: MethodPut
        start: 138
        end: 141
      type: Method
    sep:
      kind: Separator
      start: 43
      end: 46
    type: Request
  - url:
      value: https://api.somewhere.com/items/1
      token:
        kind: URL
        start: 468
        end: 501
      type: URL
    body:
      value: |-
        {
          "something": "here"
        }
      token:
        kind: Body
        start: 503
        end: 530
      type: Body
    responseRedirect: null
    responseReference: null
    httpVersion: null
    comment:
      text: Body
      token:
        kind: Comment
        start: 458
        end: 462
      type: Comment
    vars: []
    prompts: []
    headers: []
    method:
      token:
        kind: MethodPost
        start: 463
        end: 467
      type: Method
    sep:
      kind: Separator
      start: 454
      end: 457
    type: Request
  - url:
      value: https://example.com
      token:
        kind: URL
        start: 668
        end: 687
      type: URL
    body: null
    responseRedirect: null
    responseReference: null
    httpVersion: null
    comment: null
    vars:
      - value:
          value: value
          token:
            kind: Text
            start: 549
            end: 554
          type: TextLiteral
        ident:
          name: something
          token:
            kind: Ident
            start: 537
            end: 546
          type: Ident
        at:
          kind: At
          start: 536
          end: 537
        type: VarStatement
      - value:
          left: null
          right: null
          interp:
            expr:
              name: something
              token:
                kind: Ident
                start: 570
                end: 579
              type: Ident
            open:
              kind: OpenInterp
              start: 567
              end: 569
            close:
              kind: CloseInterp
              start: 580
              end: 582
            type: Interp
          type: InterpolatedExpression
        ident:
          name: interp
          token:
            kind: Ident
            start: 558
            end: 564
          type: Ident
        at:
          kind: At
          start: 557
          end: 558
        type: VarStatement
      - value:
          value: 30s
          token:
            kind: Text
            start: 617
            end: 620
          type: TextLiteral
        ident:
          name: timeout
          token:
            kind: Timeout
            start: 607
            end: 614
          type: Ident
        at:
          kind: At
          start: 606
          end: 607
        type: VarStatement
      - value:
          value: 10s
          token:
            kind: Text
            start: 645
            end: 648
          type: TextLiteral
        ident:
          name: connection-timeout
          token:
            kind: ConnectionTimeout
            start: 624
            end: 642
          type: Ident
        at:
          kind: At
          start: 623
          end: 624
        type: VarStatement
      - value: null
        ident:
          name: no-redirect
          token:
            kind: NoRedirect
            start: 652
            end: 663
          type: Ident
        at:
          kind: At
          start: 651
          end: 652
        type: VarStatement
    prompts:
      - ident:
          name: id
          token:
            kind: Ident
            start: 593
            end: 595
          type: Ident
        description:
          value: User ID
          token:
            kind: Text
            start: 596
            end: 603
          type: TextLiteral
        at:
          kind: At
          start: 585
          end: 586
        type: Prompt
    headers: []
    method:
      token:
        kind: MethodGet
        start: 664
        end: 667
      type: Method
    sep:
      kind: Separator
      start: 530
      end: 533
    type: Request
  - url:
      value: https://api.somewhere.com/items/1
      token:
        kind: URL
        start: 730
        end: 763
      type: URL
    body:
      value:
        value: input.json
        token:
          kind: Text
          start: 798
          end: 808
        type: TextLiteral
      token:
        kind: LeftAngle
        start: 796
        end: 797
      type: BodyFile
    responseRedirect: null
    responseReference: null
    httpVersion: null
    comment:
      text: Read the body from ./input.json
      token:
        kind: Comment
        start: 693
        end: 724
      type: Comment
    vars: []
    prompts: []
    headers:
      - value:
          value: application/json
          token:
            kind: Text
            start: 778
            end: 794
          type: TextLiteral
        key: Content-Type
        token:
          kind: Header
          start: 764
          end: 776
        type: Header
    method:
      token:
        kind: MethodPost
        start: 725
        end: 729
      type: Method
    sep:
      kind: Separator
      start: 689
      end: 692
    type: Request
  - url:
      left: null
      right:
        value: /items/1
        token:
          kind: Text
          start: 828
          end: 836
        type: TextLiteral
      interp:
        expr:
          name: base
          token:
            kind: Ident
            start: 821
            end: 825
          type: Ident
        open:
          kind: OpenInterp
          start: 818
          end: 820
        close:
          kind: CloseInterp
          start: 826
          end: 828
        type: Interp
      type: InterpolatedExpression
    body: null
    responseRedirect: null
    responseReference: null
    httpVersion: null
    comment: null
    vars: []
    prompts: []
    headers: []
    method:
      token:
        kind: MethodGet
        start: 814
        end: 817
      type: Method
    sep:
      kind: Separator
      start: 810
      end: 813
    type: Request
  - url:
      value: https://example.com
      token:
        kind: URL
        start: 846
        end: 865
      type: URL
    body: null
    responseRedirect: null
    responseReference: null
    httpVersion: null
    comment: null
    vars: []
    prompts: []
    headers:
      - value:
          value: '*/*'
          token:
            kind: Text
            start: 874
            end: 877
          type: TextLiteral
        key: Accept
        token:
          kind: Header
          start: 866
          end: 872
        type: Header
      - value:
          value: application/json
          token:
            kind: Text
            start: 892
            end: 908
          type: TextLiteral
        key: Content-Type
        token:
          kind: Header
          start: 878
          end: 890
        type: Header
      - value:
          value: something
          token:
            kind: Text
            start: 920
            end: 929
          type: TextLiteral
        key: X-Api-Key
        token:
          kind: Header
          start: 909
          end: 918
        type: Header
      - value:
          value: Bearer somesecret token
          token:
            kind: Text
            start: 945
            end: 968
          type: TextLiteral
        key: Authorization
        token:
          kind: Header
          start: 930
          end: 943
        type: Header
    method:
      token:
        kind: MethodGet
        start: 842
        end: 845
      type: Method
    sep:
      kind: Separator
      start: 838
      end: 841
    type: Request
type: File
